-- create tables

CREATE TABLE Director (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255)
);

CREATE TABLE Movie (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255),
    director_id INTEGER REFERENCES Director(id)
);

CREATE TABLE Actor (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255),
    movie_id INTEGER REFERENCES Movie(id)
);

CREATE TABLE MovieActor (
    movie_id INTEGER REFERENCES Movie(id),
    actor_id INTEGER REFERENCES Actor(id),
    PRIMARY KEY (movie_id, actor_id)
);


INSERT INTO Director (name) VALUES ('Martin Scorsese');

INSERT INTO Movie (title, director_id) VALUES ('Shutter Island', 1);

INSERT INTO Actor (name) VALUES ('Mark Ruffalo'), ('Leonardo DiCaprio');



ALTER TABLE Movie
ADD CONSTRAINT movie_director_fk
FOREIGN KEY (director_id) REFERENCES Director(id);

ALTER TABLE Actor
ADD CONSTRAINT actor_movie_fk
FOREIGN KEY (movie_id) REFERENCES Movie(id);


